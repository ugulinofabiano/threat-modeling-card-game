import{a as g,j as e,d as R,e as D}from"./vendor-react-96Rp_QfS.js";import{G as U}from"./vendor-genai-Bzzmx5Ll.js";import{d as T}from"./vendor-marked-DajSjiQI.js";import{R as L,P as G,a as F,C as q,T as W}from"./vendor-recharts-CQkdijSJ.js";import"./vendor-CYTP0itB.js";(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))c(o);new MutationObserver(o=>{for(const n of o)if(n.type==="childList")for(const f of n.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&c(f)}).observe(document,{childList:!0,subtree:!0});function u(o){const n={};return o.integrity&&(n.integrity=o.integrity),o.referrerPolicy&&(n.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?n.credentials="include":o.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function c(o){if(o.ep)return;o.ep=!0;const n=u(o);fetch(o.href,n)}})();var i=(t=>(t.SPOOFING="Spoofing",t.TAMPERING="Tampering",t.REPUDIATION="Repudiation",t.INFORMATION_DISCLOSURE="Information Disclosure",t.DENIAL_OF_SERVICE="Denial of Service",t.ELEVATION_OF_PRIVILEGE="Elevation of Privilege",t))(i||{}),a=(t=>(t.LOW="Baixo",t.MEDIUM="Médio",t.HIGH="Alto",t))(a||{});const z=[{id:"deck-auth",name:"Cidadela das Identidades",icon:"fa-fort-awesome",description:"Os portões de ferro que controlam quem entra no reino e quem é banido para as trevas.",cards:[{id:"AUTH-01",title:"O Cerco das Mil Chaves",category:i.SPOOFING,impact:a.HIGH,probability:a.HIGH,description:"Um exército de espectros automatizados tenta forçar os selos dos portões usando chaves roubadas de outros reinos.",gameHint:"Tecnologia: Credential Stuffing. Use MFA e Rate Limiting.",imagePrompt:"A swarm of spectral medieval keys flying towards a massive iron gate, blue magical aura, woodcut style",mitigation:"Implementar MFA e bloqueio inteligente de IPs.",reference:"OWASP A07:2021",referenceUrl:"https://owasp.org/Top10/A07_2021-Identification_and_Authentication_Failures/"},{id:"AUTH-02",title:"O Fantasma do Cavaleiro",category:i.SPOOFING,impact:a.HIGH,probability:a.MEDIUM,description:"Um cavaleiro deixou o posto, mas sua sombra continua ativa, permitindo que impostores ajam em seu nome.",gameHint:"Tecnologia: Session Hijacking. O token de sessão não expira.",imagePrompt:"A transparent ghostly knight figure sitting on a throne, identity theft illumination, medieval style",mitigation:"Implementar invalidação de sessão e timeouts curtos.",reference:"OWASP ASVS",referenceUrl:"https://owasp.org/www-project-application-security-verification-standard/"},{id:"auth-03",title:"O Escrivão Indiscreto",category:i.INFORMATION_DISCLOSURE,impact:a.MEDIUM,probability:a.HIGH,description:"O guardião do portão revela se um nome está na lista real antes mesmo de pedir a senha.",gameHint:"Tecnologia: User Enumeration. Mensagens de erro distintas.",imagePrompt:"A medieval guard pointing at a name list on a scroll, whispering to a spy in a dark corner",mitigation:"Padronizar respostas de erro de login.",reference:"OWASP WSTG",referenceUrl:"https://owasp.org/www-project-web-security-testing-guide/"},{id:"AUTH-04",title:"O Selo de Cera Fraco",category:i.TAMPERING,impact:a.HIGH,probability:a.MEDIUM,description:"Os decretos reais são selados com cera comum que pode ser derretida e refeita por qualquer falsificador.",gameHint:"Tecnologia: Weak JWT Secret. Chaves de assinatura fracas.",imagePrompt:"A candle melting a red wax seal on a medieval scroll, suspicious hands, parchment background",mitigation:"Usar algoritmos de assinatura fortes (RS256) e segredos longos.",reference:"OWASP JWT Security",referenceUrl:"https://cheatsheetseries.owasp.org/cheatsheets/JSON_Web_Token_for_Java_Cheat_Sheet.html"},{id:"AUTH-05",title:"A Porta dos Fundos",category:i.ELEVATION_OF_PRIVILEGE,impact:a.HIGH,probability:a.LOW,description:"Uma pequena porta usada pelos servos durante a construção nunca foi trancada após o término da obra.",gameHint:"Tecnologia: Default Credentials. Senhas de fábrica não alteradas.",imagePrompt:"A small hidden door in a stone wall overgrown with vines, a shadow figure entering",mitigation:"Alterar todas as senhas padrão e desativar contas administrativas genéricas.",reference:"OWASP A05:2021",referenceUrl:"https://owasp.org/Top10/A05_2021-Security_Misconfiguration/"},{id:"AUTH-06",title:"O Teste de Sangue Falso",category:i.SPOOFING,impact:a.HIGH,probability:a.MEDIUM,description:"Um plebeu usa um amuleto que imita o brilho do sangue real para acessar áreas restritas do castelo.",gameHint:"Tecnologia: Token Forgery. Falsificação de tokens de autenticação.",imagePrompt:"A medieval peasant holding a glowing green amulet that projects a royal crest illumination",mitigation:"Validar rigorosamente a assinatura de todos os tokens e selos digitais.",reference:"OWASP A07:2021",referenceUrl:"https://owasp.org/Top10/A07_2021-Identification_and_Authentication_Failures/"},{id:"AUTH-07",title:"O Vigia Cego",category:i.DENIAL_OF_SERVICE,impact:a.MEDIUM,probability:a.MEDIUM,description:"Um feitiço faz o vigia dormir se ele for questionado muitas vezes seguidas pela mesma pessoa.",gameHint:"Tecnologia: Auth DoS. Bloqueio de conta por força bruta sem limite.",imagePrompt:"A medieval guard sleeping on a stone bench, dozens of questions as scrolls surrounding him",mitigation:"Implementar limites de tentativas (Rate Limit) e CAPTCHA.",reference:"OWASP Authentication Cheat Sheet",referenceUrl:"https://cheatsheetseries.owasp.org/cheatsheets/Authentication_Cheat_Sheet.html"}]},{id:"deck-api",name:"As Caravanas de Dados",icon:"fa-truck-loading",description:"Rotas de comércio onde mercadorias invisíveis viajam através de portais mágicos (APIs).",cards:[{id:"API-01",title:"O Tributo Além do Contrato",category:i.TAMPERING,impact:a.HIGH,probability:a.MEDIUM,description:"Um mercador envia campos extras no manifesto e o escrivão atualiza propriedades que não deveria.",gameHint:"Tecnologia: Mass Assignment. Alteração de propriedades sensíveis via JSON.",imagePrompt:"A medieval merchant hiding secret gold bars inside a bag of wheat on a scale",mitigation:"Utilizar DTOs e Allow-lists de campos.",reference:"OWASP API3:2023",referenceUrl:"https://owasp.org/API-Security/editions/2023/en/0xa3-broken-object-property-level-authorization/"},{id:"API-02",title:"O Mensageiro Iludido",category:i.INFORMATION_DISCLOSURE,impact:a.HIGH,probability:a.MEDIUM,description:"O mensageiro real é convencido a entregar uma carta dentro do próprio castelo por um inimigo externo.",gameHint:"Tecnologia: SSRF. O servidor faz requisições internas forçadas.",imagePrompt:"A courier knight standing in a dark medieval tunnel, looking at a confusing map with mirrors",mitigation:"Validar URLs de destino e usar segmentação de rede.",reference:"OWASP A10:2021",referenceUrl:"https://owasp.org/Top10/A10_2021-Server-Side_Request_Forgery_SSRF/"},{id:"API-03",title:"O Envenenamento da Fonte",category:i.TAMPERING,impact:a.HIGH,probability:a.HIGH,description:"Um inimigo coloca substâncias no poço que alimenta as cozinhas do reino via comandos de voz.",gameHint:"Tecnologia: Injection. Dados maliciosos que alteram queries ou comandos.",imagePrompt:"A dark hooded figure pouring a glowing purple liquid into a medieval stone well",mitigation:"Parametrizar todas as consultas e validar entradas.",reference:"OWASP A03:2021",referenceUrl:"https://owasp.org/Top10/A03_2021-Injection/"},{id:"API-04",title:"O Bloqueio das Estradas",category:i.DENIAL_OF_SERVICE,impact:a.MEDIUM,probability:a.HIGH,description:"Tantas carroças vazias são enviadas para a ponte que as carroças com mantimentos não conseguem passar.",gameHint:"Tecnologia: DoS. Inundação de requisições para esgotar recursos.",imagePrompt:"A narrow medieval stone bridge clogged with broken wooden carts, a river below",mitigation:"Implementar Rate Limiting e detecção de anomalias.",reference:"OWASP API4:2023",referenceUrl:"https://owasp.org/API-Security/editions/2023/en/0xa4-unrestricted-resource-consumption/"},{id:"API-05",title:"A Fofoca dos Alquimistas",category:i.INFORMATION_DISCLOSURE,impact:a.MEDIUM,probability:a.MEDIUM,description:"Ao perguntar sobre uma poção, o alquimista revela por acidente a fórmula secreta do reino.",gameHint:"Tecnologia: Verbose Error Messages. Logs ou erros revelando detalhes técnicos.",imagePrompt:"Two medieval alchemists talking in a smoky lab, one gesturing to a wall of secret formulas",mitigation:"Ocultar detalhes técnicos em mensagens de erro.",reference:"OWASP A04:2021",referenceUrl:"https://owasp.org/Top10/A04_2021-Insecure_Design/"},{id:"API-06",title:"O Cavalo de Troia",category:i.TAMPERING,impact:a.HIGH,probability:a.LOW,description:"Uma carruagem de presentes esconde guerreiros prontos para atacar por dentro.",gameHint:"Tecnologia: Malicious File Upload. Scripts que executam no servidor.",imagePrompt:"A massive wooden horse being pulled into a medieval castle gate by knights",mitigation:"Validar tipos de arquivos e escanear malware.",reference:"OWASP File Upload",referenceUrl:"https://owasp.org/www-community/vulnerabilities/Unrestricted_File_Upload"}]},{id:"deck-vault",name:"O Cofre das Relíquias",icon:"fa-vault",description:"Onde os segredos e as riquezas dos súditos são guardados. Dados sensíveis e privacidade.",cards:[{id:"VAULT-01",title:"O Cofre de Cristal",category:i.INFORMATION_DISCLOSURE,impact:a.HIGH,probability:a.MEDIUM,description:"As moedas de ouro estão em um baú de vidro, visíveis para qualquer um no mercado.",gameHint:"Tecnologia: Plaintext Storage. Dados sensíveis não criptografados.",imagePrompt:"A transparent chest full of gold coins on a medieval stone pedestal, glowing light",mitigation:"Criptografar dados sensíveis em repouso.",reference:"OWASP A02:2021",referenceUrl:"https://owasp.org/Top10/A02_2021-Cryptographic_Failures/"},{id:"VAULT-02",title:"O Eco do Bardo",category:i.INFORMATION_DISCLOSURE,impact:a.MEDIUM,probability:a.HIGH,description:"O bardo repete todas as ordens dadas no castelo para a multidão na taverna.",gameHint:"Tecnologia: Logging PII. Gravação de dados pessoais em logs.",imagePrompt:"A medieval bard singing to a crowd in a tavern, music notes turning into secret text",mitigation:"Mascarar dados nos logs e auditoria.",reference:"OWASP Logging",referenceUrl:"https://cheatsheetseries.owasp.org/cheatsheets/Logging_Cheat_Sheet.html"},{id:"VAULT-03",title:"A Chave Debaixo do Tapete",category:i.TAMPERING,impact:a.HIGH,probability:a.LOW,description:"A chave mestra do tesouro está escondida no mesmo pergaminho que ensina como abrir o cofre.",gameHint:"Tecnologia: Hardcoded Keys. Chaves no código.",imagePrompt:"A giant iron key half-hidden under a simple medieval rug on a stone floor",mitigation:"Utilizar KMS/Vault.",reference:"NIST Key Management",referenceUrl:"https://csrc.nist.gov/publications/detail/sp/800-57-part-1/rev-5/final"},{id:"VAULT-04",title:"O Registro Apagado",category:i.REPUDIATION,impact:a.MEDIUM,probability:a.MEDIUM,description:"Um nobre retira ouro e depois apaga seu nome do livro, fingindo que nunca esteve lá.",gameHint:"Tecnologia: Insufficient Logging. Falta de trilhas de auditoria.",imagePrompt:"A hand tearing a page from a heavy medieval book in a dark library",mitigation:"Logs de auditoria imutáveis.",reference:"OWASP A09:2021",referenceUrl:"https://owasp.org/Top10/A09_2021-Security_Logging_and_Monitoring_Failures/"},{id:"VAULT-05",title:"A Profecia Reutilizada",category:i.SPOOFING,impact:a.HIGH,probability:a.LOW,description:"Um pergaminho de bênção usado ontem é roubado e usado hoje para entrar no templo sagrado.",gameHint:"Tecnologia: Replay Attack. Reuso de tokens de autenticação.",imagePrompt:"A rogue stealing a glowing scroll from a medieval altar, time loop symbols",mitigation:"Utilizar nonces e tokens de uso único.",reference:"OWASP Replay Attack",referenceUrl:"https://owasp.org/www-community/attacks/Replay_attack"},{id:"VAULT-06",title:"O Cofre Sem Tranca",category:i.INFORMATION_DISCLOSURE,impact:a.HIGH,probability:a.HIGH,description:"Um depósito de grãos foi construído sem porta, assumindo que ninguém o encontraria na floresta.",gameHint:"Tecnologia: Insecure Direct Object Reference (IDOR). Acesso via URL direta.",imagePrompt:"A medieval granary in the middle of a deep forest with no door, open to anyone",mitigation:"Verificar autorização em cada acesso a objetos.",reference:"OWASP API1:2023",referenceUrl:"https://owasp.org/API-Security/editions/2023/en/0xa1-broken-object-level-authorization/"}]},{id:"deck-infra",name:"As Muralhas e Túneis",icon:"fa-mountain-city",description:"A fundação de pedra do reino. Servidores, redes e infraestrutura.",cards:[{id:"INFRA-01",title:"O Túnel dos Construtores",category:i.INFORMATION_DISCLOSURE,impact:a.HIGH,probability:a.MEDIUM,description:"Uma passagem secreta usada durante a obra nunca foi fechada.",gameHint:"Tecnologia: Exposed Ports. SSH exposto.",imagePrompt:"A dark medieval tunnel entrance behind a stone wall, torchlight flickering",mitigation:"Hardening de rede.",reference:"OWASP A05:2021",referenceUrl:"https://owasp.org/Top10/A05_2021-Security_Misconfiguration/"},{id:"INFRA-02",title:"O Portão Sem Sentinela",category:i.TAMPERING,impact:a.MEDIUM,probability:a.HIGH,description:"Qualquer carruagem entra no castelo sem ser revistada.",gameHint:"Tecnologia: Lack of WAF. Sem inspeção de tráfego.",imagePrompt:"A massive medieval gateway with no guards, villagers entering freely",mitigation:"Implementar WAF.",reference:"STRIDE Tampering",referenceUrl:"https://learn.microsoft.com/en-us/previous-versions/azure/security/develop/threat-modeling-tool-threats#tampering"},{id:"INFRA-03",title:"A Confiança Cega",category:i.ELEVATION_OF_PRIVILEGE,impact:a.HIGH,probability:a.MEDIUM,description:"Dentro das muralhas, ninguém pede identificação.",gameHint:"Tecnologia: Lateral Movement. Falta de segmentação.",imagePrompt:"A spy in shadows walking past knights in a castle courtyard",mitigation:"Implementar Zero Trust.",reference:"NIST Zero Trust",referenceUrl:"https://csrc.nist.gov/publications/detail/sp/800-207/final"},{id:"INFRA-04",title:"O Cerco de Flechas",category:i.DENIAL_OF_SERVICE,impact:a.HIGH,probability:a.LOW,description:"Milhares de flechas impedem os guardas de defenderem os portões.",gameHint:"Tecnologia: DDoS. Inundação de tráfego.",imagePrompt:"Thousands of flaming arrows raining over a medieval castle battlements",mitigation:"Mitigação de DDoS.",reference:"OWASP DoS",referenceUrl:"https://cheatsheetseries.owasp.org/cheatsheets/Denial_of_Service_Cheat_Sheet.html"},{id:"INFRA-05",title:"O Vigia Corrompido",category:i.TAMPERING,impact:a.HIGH,probability:a.LOW,description:"Um espião troca o binóculo do vigia por um que mostra imagens falsas do horizonte.",gameHint:"Tecnologia: DNS Spoofing. Redirecionamento de tráfego.",imagePrompt:"A medieval lookout using a brass telescope, distorted landscape ahead",mitigation:"Usar DNSSEC e monitoramento de integridade.",reference:"OWASP DNS Security",referenceUrl:"https://cheatsheetseries.owasp.org/cheatsheets/DNS_Security_Cheat_Sheet.html"},{id:"INFRA-06",title:"A Muralha Desmoronando",category:i.DENIAL_OF_SERVICE,impact:a.HIGH,probability:a.LOW,description:"A fundação da torre norte está podre e qualquer peso extra a fará cair.",gameHint:"Tecnologia: Memory Leak. Consumo gradual de recursos.",imagePrompt:"A medieval stone tower with large cracks, crumbling into the sea",mitigation:"Monitoramento de recursos e perfis de performance.",reference:"OWASP Resource Exhaustion",referenceUrl:"https://owasp.org/www-community/vulnerabilities/Resource_exhaustion"}]},{id:"deck-frontend",name:"O Teatro das Sombras",icon:"fa-masks-theater",description:"A interface com o mundo exterior. Onde as aparências escondem maldições.",cards:[{id:"FRONT-01",title:"A Maldição do Espelho",category:i.TAMPERING,impact:a.MEDIUM,probability:a.HIGH,description:"Um espião escreve uma maldição no espelho da taverna (XSS).",gameHint:"Tecnologia: Reflected XSS.",imagePrompt:"A medieval ornate mirror reflecting glowing green runes instead of a face",mitigation:"Sanitização de inputs.",reference:"OWASP A03:2021",referenceUrl:"https://owasp.org/Top10/A03_2021-Injection/"},{id:"FRONT-02",title:"O Vidro Invisível",category:i.TAMPERING,impact:a.LOW,probability:a.MEDIUM,description:"Um vidro invisível sobreposto ao mapa real faz o general clicar no local errado.",gameHint:"Tecnologia: Clickjacking.",imagePrompt:"A general pointing at a map covered by a semi-transparent glass sheet, distortion",mitigation:"X-Frame-Options.",reference:"OWASP Clickjacking",referenceUrl:"https://cheatsheetseries.owasp.org/cheatsheets/Clickjacking_Defense_Cheat_Sheet.html"},{id:"FRONT-03",title:"O Bardo Impostor",category:i.SPOOFING,impact:a.MEDIUM,probability:a.MEDIUM,description:"Um bardo canta canções que convencem o povo a entregar suas chaves para um falso coletor de impostos.",gameHint:"Tecnologia: Phishing / Social Engineering.",imagePrompt:"A medieval bardo talking to peasants in a village square, gold coins being handed over",mitigation:"Educação de usuários e MFA.",reference:"OWASP Social Engineering",referenceUrl:"https://owasp.org/www-community/attacks/Social_Engineering"},{id:"FRONT-04",title:"O Pergaminho de Outras Terras",category:i.TAMPERING,impact:a.HIGH,probability:a.MEDIUM,description:"Um mensageiro traz uma carta que, ao ser aberta, desenha símbolos mágicos que controlam a mente de quem lê.",gameHint:"Tecnologia: DOM-based XSS. Scripts executados no navegador via dados locais.",imagePrompt:"A medieval scroll opening with a burst of magical light, symbols flying out",mitigation:"Validar dados de fontes como window.location ou localStorage.",reference:"OWASP DOM XSS",referenceUrl:"https://cheatsheetseries.owasp.org/cheatsheets/DOM_based_XSS_Prevention_Cheat_Sheet.html"},{id:"FRONT-05",title:"A Estrada de Falsa Direção",category:i.TAMPERING,impact:a.LOW,probability:a.HIGH,description:"Um sinalizador de estrada foi trocado para apontar para o castelo do inimigo em vez do mercado.",gameHint:"Tecnologia: Open Redirect. Redirecionamento sem validação.",imagePrompt:"A wooden medieval road sign with two arrows pointing in opposite directions, shadowy forest",mitigation:"Validar destinos de redirecionamento.",reference:"OWASP Redirects",referenceUrl:"https://cheatsheetseries.owasp.org/cheatsheets/Unvalidated_Redirects_and_Forwards_Cheat_Sheet.html"}]},{id:"deck-supply",name:"O Mercado Estrangeiro",icon:"fa-ship",description:"Componentes e aliados externos (Supply Chain). Nem todo presente é uma benção.",cards:[{id:"SUPPLY-01",title:"O Tempero Envenenado",category:i.TAMPERING,impact:a.HIGH,probability:a.HIGH,description:"Um ingrediente essencial contém veneno injetado pelo mercador na fonte.",gameHint:"Tecnologia: Vulnerable Dependencies.",imagePrompt:"A medieval merchant ship at a dock, bags of spices spilling out purple smoke",mitigation:"Análise SCA.",reference:"OWASP A06:2021",referenceUrl:"https://owasp.org/Top10/A06_2021-Vulnerable_and_Outdated_Components/"},{id:"SUPPLY-02",title:"O Nome Quase Igual",category:i.SPOOFING,impact:a.HIGH,probability:a.LOW,description:"Um alquimista cria uma poção idêntica com nome ligeiramente diferente para enganar o exército.",gameHint:"Tecnologia: Typosquatting.",imagePrompt:"Two identical medieval glass bottles with slightly different runes on labels",mitigation:"Verificar hashes.",reference:"OWASP Supply Chain",referenceUrl:"https://owasp.org/www-project-software-supply-chain-security-guide/"},{id:"SUPPLY-03",title:"O Escravo nas Cozinhas",category:i.ELEVATION_OF_PRIVILEGE,impact:a.HIGH,probability:a.LOW,description:"Um novo ajudante de cozinha, contratado sem referências, acaba por ser um assassino infiltrado.",gameHint:"Tecnologia: Insider Threat / Untrusted Plugin. Código de terceiros com privilégios excessivos.",imagePrompt:"A medieval chef in a busy kitchen, a shadowy figure holding a dagger in the background",mitigation:"Princípio do menor privilégio para integrações.",reference:"OWASP Least Privilege",referenceUrl:"https://owasp.org/www-community/attacks/Least_Privilege"},{id:"SUPPLY-04",title:"A Receita Roubada",category:i.INFORMATION_DISCLOSURE,impact:a.MEDIUM,probability:a.MEDIUM,description:"O livro de receitas secreto do castelo é copiado por um escriba que vende as cópias para o reino vizinho.",gameHint:"Tecnologia: Intellectual Property Theft / Data Exfiltration via 3rd party.",imagePrompt:"A scribe secretly copying a glowing medieval book at night by candlelight",mitigation:"Monitorar acesso a segredos e repositórios.",reference:"OWASP Data Exfiltration",referenceUrl:"https://owasp.org/www-community/attacks/Data_Exfiltration"},{id:"SUPPLY-05",title:"A Espada de Vidro",category:i.TAMPERING,impact:a.HIGH,probability:a.MEDIUM,description:"As espadas entregues pelo ferreiro parecem de aço, mas quebram no primeiro golpe da batalha.",gameHint:"Tecnologia: Subverted Build Process. Injeção de código malicioso durante o build.",imagePrompt:"A medieval sword shattering into glass pieces against a stone wall",mitigation:"Garantir integridade do pipeline de CI/CD.",reference:"OWASP CI/CD Security",referenceUrl:"https://owasp.org/www-project-top-10-ci-cd-security-risks/"}]},{id:"deck-logic",name:"As Leis da Corte",icon:"fa-scale-balanced",description:"Falhas na lógica das regras que governam o reino. Erros de negócio.",cards:[{id:"LOGIC-01",title:"O Duelo Simultâneo",category:i.TAMPERING,impact:a.MEDIUM,probability:a.LOW,description:"Dois cavaleiros pegam a mesma espada ao mesmo tempo.",gameHint:"Tecnologia: Race Condition.",imagePrompt:"Two medieval knights reaching for the same glowing sword stuck in a stone",mitigation:"Locks atômicos.",reference:"OWASP Race Condition",referenceUrl:"https://owasp.org/www-community/vulnerabilities/Race_Condition"},{id:"LOGIC-02",title:"O Imposto Negativo",category:i.TAMPERING,impact:a.HIGH,probability:a.LOW,description:'Um mercador declara venda de "-10" sacas para receber moedas.',gameHint:"Tecnologia: Business Logic Flaw.",imagePrompt:"A medieval merchant receiving gold from a confused royal tax collector",mitigation:"Validação de sinais.",reference:"OWASP Logic Flaws",referenceUrl:"https://portswigger.net/web-security/logic-vulnerabilities"},{id:"LOGIC-03",title:"O Pedido Infinito",category:i.DENIAL_OF_SERVICE,impact:a.MEDIUM,probability:a.MEDIUM,description:"O escriba tenta trazer todos os grãos de uma vez e desmaia.",gameHint:"Tecnologia: Resource Exhaustion.",imagePrompt:"A medieval scribe buried under thousands of falling scrolls",mitigation:"Paginação.",reference:"OWASP API4:2023",referenceUrl:"https://owasp.org/API-Security/editions/2023/en/0xa4-unrestricted-resource-consumption/"},{id:"LOGIC-04",title:"O Cupom Infinito",category:i.TAMPERING,impact:a.MEDIUM,probability:a.MEDIUM,description:"Um camponês usa a mesma autorização de pão dez vezes no mesmo dia antes que o padeiro perceba.",gameHint:"Tecnologia: Replay / Business Validation. Falta de controle de estado.",imagePrompt:"A peasant carrying ten loaves of bread while showing a single small scroll to a baker",mitigation:"Validar unicidade de transações e cupons.",reference:"OWASP Business Logic",referenceUrl:"https://owasp.org/www-community/vulnerabilities/Business_logic_vulnerability"},{id:"LOGIC-05",title:"O Escrivão Impaciente",category:i.DENIAL_OF_SERVICE,impact:a.MEDIUM,probability:a.MEDIUM,description:"O escrivão para de anotar novos decretos se o anterior demorar mais do que um piscar de olhos para ser selado.",gameHint:"Tecnologia: Slowloris / Timeout Flaw. Manter conexões abertas para travar o sistema.",imagePrompt:"An hourglass on a medieval desk, the sand is stuck and a crowd of people is waiting",mitigation:"Configurar timeouts agressivos e limites de conexões simultâneas.",reference:"OWASP Slowloris",referenceUrl:"https://owasp.org/www-community/attacks/Slowloris"}]},{id:"deck-monitoring",name:"As Torres de Vigia",icon:"fa-tower-observation",description:"Observabilidade e resposta. O que os olhos não veem, o reino sente.",cards:[{id:"MON-01",title:"O Nevoeiro da Batalha",category:i.INFORMATION_DISCLOSURE,impact:a.HIGH,probability:a.MEDIUM,description:"O castelo está sob ataque, mas o capitão da guarda não recebe nenhum aviso porque os pombos-correio estão presos.",gameHint:"Tecnologia: Lack of Alerting. Ninguém percebe o ataque em tempo real.",imagePrompt:"A medieval castle surrounded by thick fog, an enemy army approaching silently",mitigation:"Implementar alertas em tempo real para erros e anomalias.",reference:"OWASP A09:2021",referenceUrl:"https://owasp.org/Top10/A09_2021-Security_Logging_and_Monitoring_Failures/"},{id:"MON-02",title:"O Livro de Registros Falsos",category:i.REPUDIATION,impact:a.MEDIUM,probability:a.LOW,description:"Um espião escreve mil entradas falsas no livro de visitas para esconder sua própria entrada.",gameHint:"Tecnologia: Log Injection. Poluição de logs para dificultar investigação.",imagePrompt:"A messy pile of medieval scrolls with ink blots everywhere, a hand writing frantically",mitigation:"Sanitizar dados antes de gravar nos logs.",reference:"OWASP Log Injection",referenceUrl:"https://owasp.org/www-community/attacks/Log_Injection"},{id:"MON-03",title:"A Sentinela de Pedra",category:i.DENIAL_OF_SERVICE,impact:a.LOW,probability:a.HIGH,description:"O vigia anota absolutamente tudo: cada mosca que passa, cada folha que cai. O livro acaba em uma hora.",gameHint:"Tecnologia: Log Flooding. Disco cheio por excesso de logs inúteis.",imagePrompt:"A medieval guard writing in a giant book while looking at a single butterfly",mitigation:"Configurar níveis de log e retenção automática.",reference:"OWASP Logging Guide",referenceUrl:"https://cheatsheetseries.owasp.org/cheatsheets/Logging_Cheat_Sheet.html"},{id:"MON-04",title:"O Espelho de Vigilância Quebrado",category:i.TAMPERING,impact:a.HIGH,probability:a.LOW,description:"O capitão olha para o espelho mágico de vigilância, mas ele mostra uma imagem de ontem, quando tudo estava calmo.",gameHint:"Tecnologia: Monitoring Tampering. Atacante desativa ou altera o monitoramento.",imagePrompt:"A medieval wizard looking at a cracked crystal ball showing a peaceful village while fire is outside",mitigation:"Proteger a infraestrutura de monitoramento com MFA e segregação.",reference:"OWASP Detection Engineering",referenceUrl:"https://owasp.org/www-project-detection-engineering/"}]}],_="tmm_intel_cache",V=t=>{try{const r=localStorage.getItem(t);return r?JSON.parse(r):{}}catch{return{}}},$=(t,r)=>{try{localStorage.setItem(t,JSON.stringify(r))}catch{console.warn("Cache quota exceeded")}},B=async t=>{const r=new U({apiKey:void 0}),c=`
    Aja como um Arquiteto de Segurança Sênior. Abaixo está uma lista de riscos identificados em um jogo de Threat Modeling:

    ${t.map(o=>`- **${o.title}** (${o.category}): Impacto ${o.impact}. Scenario: ${o.description}`).join(`
`)}

    Por favor, forneça um resumo executivo em Português usando formatação Markdown:
    1. **Maior Prioridade**: Qual o risco mais crítico?
    2. **Estratégia**: Uma recomendação para a cultura de segurança.
    3. **Próximos Passos**: 3 passos acionáveis em uma lista.
    
    Use negrito para termos importantes e mantenha um tom profissional e medieval.
  `;try{return(await r.models.generateContent({model:"gemini-3-flash-preview",contents:c})).text}catch{return`
**Relatório de Contingência do Escriba**

O Mago Real está indisponível, mas você identificou **${t.length} ameaças**.

1. **Prioridade Imediata**: Revisar ameaças de Impacto ALTO.
2. **Conselho**: Não ignore os sinais das sombras.
3. **Passos**: Triar itens, validar mitigações e agendar nova expedição.
    `.trim()}},Y=async(t,r)=>`/threat-modeling-card-game/images/${t}.png`,K=async t=>{const r=V(_);if(r[t.id])return r[t.id];const u=new U({apiKey:void 0}),c=`
    Como um Mago da Segurança, forneça sabedoria sobre a ameaça "${t.title}" (${t.category}).
    Cenário: "${t.description}".
    
    Use formatação Markdown estruturada (negrito, listas, títulos curtos).
    Inclua:
    1. **Natureza da Maldição**: Explicação técnica moderna.
    2. **Crônicas do Mundo**: Exemplo histórico real.
    3. **Defesa Arcana**: 3 conselhos técnicos em lista.
    
    Responda em Português com tom medieval realista.
  `;try{const n=(await u.models.generateContent({model:"gemini-3-flash-preview",contents:c})).text||"O pergaminho está em branco.";return r[t.id]=n,$(_,r),n}catch{return`
### Pergaminho de Emergência Arcano

A natureza de **${t.title}** é traiçoeira.

**Defesas Sugeridas:**
- ${t.mitigation}
- Validar perímetros constantemente.
- Consultar os arquivos do reino (documentação).
    `.trim()}};let y=null,O=null;async function H(){if(!y)return O||(O=(async()=>{try{const t=await fetch("/security_details.json");if(!t.ok)throw new Error(`Failed to fetch security_details.json: ${t.status}`);const r=await t.json(),u=(r==null?void 0:r.security_details)??{},c={};Object.keys(u).forEach(o=>{c[o.toUpperCase()]=u[o]}),y=c}catch(t){console.error("Error loading security details:",t),y={}}finally{O=null}})(),O)}async function J(t){if(!t)return null;await H();const r=t.toUpperCase();return y&&y[r]?y[r]:null}async function X(){return await H(),y??{}}const Q={getSecurityDetail:J,getAllSecurityDetails:X},Z="https://images.unsplash.com/photo-1599727297459-70ed96f53bb1?q=80&w=600&fit=crop",ee=({card:t,onAccept:r,onPass:u,onSkip:c,onExit:o,isFirst:n})=>{const[f,d]=g.useState(!1),[x,b]=g.useState(null),[w,S]=g.useState(!1),[P,I]=g.useState(!1),[A,N]=g.useState(null),[E,k]=g.useState(!1);g.useEffect(()=>{d(!1),b(null),N(null);const m=async()=>{S(!0);try{const p=await Y(t.id,t.imagePrompt||t.title);b(p)}catch(p){console.error("Falha ao carregar imagem:",p)}finally{S(!1)}};t.image||m()},[t.id,t.image,t.imagePrompt]);const M=async m=>{if(m.stopPropagation(),I(!0),!A){k(!0);try{const p=await Q.getSecurityDetail(t.id);if(p){let h=`## ${p.name}

`;p.technical_description&&(h+=`**Descrição técnica:** ${p.technical_description}

`),p.when_it_occurs&&(h+=`**Quando ocorre:**
`,p.when_it_occurs.forEach(v=>{h+=`- ${v}
`}),h+=`
`),p.how_to_identify&&(h+=`**Como identificar:**
`,p.how_to_identify.forEach(v=>{h+=`- ${v}
`}),h+=`
`),p.how_to_prevent&&(h+=`**Como prevenir:**
`,p.how_to_prevent.forEach(v=>{h+=`- ${v}
`}),h+=`
`),p.qual_o_risco&&(h+=`**Riscos:**
`,p.qual_o_risco.forEach(v=>{h+=`- ${v}
`}),h+=`
`),N(h)}else{const h=await K(t);N(h)}}catch(p){console.error("Erro ao obter inteligência local:",p),N("As estrelas estão nubladas. Consulte os arquivos locais na descrição da carta.")}finally{k(!1)}}},j=m=>{switch(m){case a.HIGH:return"text-red-500 border-red-500/40 bg-red-500/5 shadow-[0_0_15px_rgba(239,68,68,0.2)]";case a.MEDIUM:return"text-orange-500 border-orange-500/40 bg-orange-500/5 shadow-[0_0_15px_rgba(249,115,22,0.2)]";case a.LOW:return"text-emerald-500 border-emerald-500/40 bg-emerald-500/5 shadow-[0_0_15px_rgba(16,185,129,0.2)]";default:return"text-slate-400 border-slate-400/40"}},s=t.image||x||Z,l=()=>e.jsx("button",{onClick:m=>{m.stopPropagation(),o()},className:"absolute top-4 left-4 z-50 w-8 h-8 rounded-full bg-black/40 border border-[#b7950b]/30 text-[#b7950b] flex items-center justify-center hover:bg-[#b7950b] hover:text-black transition-all shadow-lg backdrop-blur-sm group/exit",title:"Voltar ao Castelo (Lobby)",children:e.jsx("i",{className:"fas fa-fort-awesome text-xs group-hover/exit:scale-110"})});return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"relative w-[360px] h-[560px] perspective-1000 group cursor-pointer",onClick:()=>!f&&d(!0),children:e.jsxs("div",{className:`flip-card-inner relative w-full h-full transition-transform duration-700 ease-out ${f?"rotate-y-180":""}`,children:[e.jsxs("div",{style:{backfaceVisibility:"hidden",zIndex:f?0:20},className:"absolute inset-0 bg-black border-[12px] border-[#1a0f0a] rounded-[2.5rem] shadow-2xl p-6 flex flex-col justify-between overflow-hidden ring-1 ring-[#b7950b]/30",children:[e.jsx("div",{className:"absolute inset-0 opacity-10 pointer-events-none bg-[url('https://www.transparenttextures.com/patterns/black-linen.png')]"}),e.jsx(l,{}),e.jsxs("div",{className:"relative z-10 flex flex-col h-full pointer-events-none",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6 pl-8",children:[e.jsx("span",{className:"text-[10px] font-bold text-[#b7950b] uppercase tracking-[0.4em] medieval-font",children:"Grimório Real"}),e.jsx("div",{className:"w-8 h-8 rounded-full border border-[#b7950b]/40 flex items-center justify-center bg-black",children:e.jsx("span",{className:"text-[8px] text-[#b7950b] font-bold",children:"#"})})]}),e.jsx("h3",{className:"text-2xl font-bold text-[#f4e4bc] medieval-font tracking-widest text-center mb-6 uppercase gold-glow leading-tight",children:t.title}),e.jsxs("div",{className:"flex-grow rounded-2xl overflow-hidden border border-[#b7950b]/20 shadow-inner relative bg-[#050505]",children:[w?e.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center gap-4",children:[e.jsx("i",{className:"fas fa-magic text-[#b7950b] text-3xl animate-spin"}),e.jsx("span",{className:"text-[9px] text-[#b7950b] font-bold uppercase tracking-widest",children:"Invocando..."})]}):e.jsx("img",{src:s,alt:t.title,className:"w-full h-full object-cover brightness-[0.7] contrast-[1.2] grayscale-[0.2]"}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black via-transparent to-transparent opacity-60"})]}),e.jsxs("div",{className:"mt-8 grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:`py-3 rounded-xl border text-center ${j(t.impact)}`,children:[e.jsx("div",{className:"text-[8px] font-black uppercase tracking-widest opacity-60 mb-1",children:"Impacto"}),e.jsx("div",{className:"text-xs font-bold medieval-font uppercase",children:t.impact})]}),e.jsxs("div",{className:`py-3 rounded-xl border text-center ${j(t.probability)}`,children:[e.jsx("div",{className:"text-[8px] font-black uppercase tracking-widest opacity-60 mb-1",children:"Astúcia"}),e.jsx("div",{className:"text-xs font-bold medieval-font uppercase",children:t.probability})]})]}),e.jsx("div",{className:"mt-8 text-center",children:e.jsx("span",{className:"text-[9px] font-bold text-[#b7950b] animate-pulse uppercase tracking-[0.4em] medieval-font",children:"Toque para Decifrar"})})]})]}),e.jsxs("div",{style:{backfaceVisibility:"hidden",transform:"rotateY(180deg)",zIndex:f?20:0},className:"absolute inset-0 parchment border-[10px] border-[#1a0f0a] rounded-[2.5rem] shadow-2xl p-10 flex flex-col",children:[e.jsx("div",{className:"absolute inset-0 opacity-10 pointer-events-none bg-[url('https://www.transparenttextures.com/patterns/paper-fibers.png')]"}),e.jsx(l,{}),e.jsxs("div",{className:"relative z-10 flex flex-col h-full",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6 pb-4 border-b border-[#1a0f0a]/10 pl-8",children:[e.jsx("h4",{className:"text-lg font-bold uppercase text-[#1a0f0a] medieval-font tracking-widest",children:"O Manuscrito"}),e.jsx("button",{onClick:M,className:"w-10 h-10 rounded-full bg-[#1a0f0a] text-[#b7950b] flex items-center justify-center hover:scale-110 transition-transform shadow-lg group/mage",title:"Consultar o Sábio Arcano",children:e.jsx("i",{className:"fas fa-hat-wizard group-hover/mage:animate-bounce"})})]}),e.jsxs("div",{className:"flex-grow space-y-4 text-left overflow-y-auto pr-2 custom-scrollbar",children:[e.jsxs("p",{className:"text-sm text-[#1a0f0a] leading-relaxed italic font-serif font-bold",children:['"',t.description,'"']}),t.gameHint&&e.jsxs("div",{className:"bg-black/5 p-4 rounded-xl border-l-4 border-[#b7950b] shadow-inner",children:[e.jsxs("div",{className:"text-[9px] font-bold uppercase tracking-widest text-[#8d6e63] mb-1 flex items-center gap-2",children:[e.jsx("i",{className:"fas fa-eye text-[#b7950b]"})," Revelação do Sábio"]}),e.jsx("p",{className:"text-xs text-[#2c1810] leading-relaxed",children:t.gameHint})]}),t.reference&&e.jsxs("div",{className:"pt-4 border-t border-[#1a0f0a]/5",children:[e.jsx("div",{className:"text-[8px] font-bold text-[#8d6e63] uppercase tracking-[0.2em] mb-1",children:"Tratado:"}),e.jsxs("a",{href:t.referenceUrl,target:"_blank",rel:"noopener noreferrer",className:"text-[10px] text-blue-900 font-bold underline flex items-center gap-2",children:[t.reference," ",e.jsx("i",{className:"fas fa-external-link-alt text-[8px]"})]})]})]}),e.jsxs("div",{className:"mt-8 grid grid-cols-3 gap-2 pt-4 border-t border-[#1a0f0a]/5",children:[e.jsx("button",{onClick:m=>{m.stopPropagation(),u()},className:"py-4 bg-[#8d6e63] hover:bg-[#5d4037] text-white rounded-xl text-[9px] font-bold uppercase tracking-[0.1em] transition-all shadow-md active:scale-95",children:"Ignorar"}),e.jsxs("button",{onClick:m=>{m.stopPropagation(),c()},className:"py-4 bg-[#455a64] hover:bg-[#263238] text-white rounded-xl text-[9px] font-bold uppercase tracking-[0.1em] transition-all shadow-md active:scale-95 flex items-center justify-center gap-1",children:[e.jsx("i",{className:"fas fa-rotate text-[10px]"})," Pular"]}),e.jsx("button",{onClick:m=>{m.stopPropagation(),r()},className:"py-4 bg-[#b7950b] hover:bg-[#9a7d0a] text-black rounded-xl text-[9px] font-bold uppercase tracking-[0.1em] transition-all shadow-lg active:scale-95",children:"Combater"})]})]})]})]})}),P&&e.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center p-4 bg-black/80 backdrop-blur-sm animate-fadeIn",children:e.jsxs("div",{className:"relative parchment max-w-2xl w-full max-h-[80vh] overflow-hidden rounded-[2rem] border-[12px] border-[#1a0f0a] shadow-2xl flex flex-col",children:[e.jsx("button",{onClick:()=>I(!1),className:"absolute top-4 right-4 text-[#1a0f0a] hover:scale-125 transition-transform",children:e.jsx("i",{className:"fas fa-times text-2xl"})}),e.jsxs("div",{className:"p-12 overflow-y-auto custom-scrollbar",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("i",{className:"fas fa-scroll text-4xl text-[#1a0f0a] mb-4"}),e.jsx("h3",{className:"text-2xl font-bold medieval-font uppercase tracking-widest border-b-2 border-[#1a0f0a]/20 pb-4",children:"Inteligência Arcana"})]}),e.jsx("div",{className:"space-y-6 text-[#1a0f0a] font-serif leading-relaxed text-base italic markdown-content",children:E?e.jsxs("div",{className:"flex flex-col items-center justify-center py-20 gap-4",children:[e.jsx("i",{className:"fas fa-hat-wizard text-5xl animate-bounce"}),e.jsx("p",{className:"medieval-font uppercase tracking-widest text-sm",children:"O Mago está consultando os cosmos..."})]}):e.jsx("div",{dangerouslySetInnerHTML:{__html:A?T.parse(A):""}})}),e.jsx("div",{className:"mt-12 pt-8 border-t border-[#1a0f0a]/20 text-center",children:e.jsx("button",{onClick:()=>I(!1),className:"px-8 py-3 bg-[#1a0f0a] text-[#d4c3a1] rounded-full font-bold uppercase tracking-widest text-xs hover:bg-black transition-colors",children:"Fechar Pergaminho"})})]})]})})]})},ae=({backlog:t})=>{const u=t.reduce((f,d)=>{let x=d.impact===a.HIGH?3:d.impact===a.MEDIUM?2:1,b=d.probability===a.HIGH?3:d.probability===a.MEDIUM?2:1;return f+x*b},0),o=Math.min(u/40*100,100),n=()=>o<25?"from-emerald-600 to-emerald-400":o<60?"from-orange-600 to-yellow-400":"from-red-700 to-orange-500";return e.jsxs("div",{className:"w-full max-w-sm bg-[#1a0f0a] rounded-2xl p-5 border-2 border-[#b7950b]/40 shadow-2xl relative overflow-hidden",children:[e.jsxs("div",{className:"flex justify-between items-center mb-3 relative z-10",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("i",{className:`fas fa-chess-rook ${o>70?"text-red-500 animate-bounce":"text-[#b7950b]"}`}),e.jsx("span",{className:"text-[10px] font-black text-[#b7950b] uppercase tracking-widest medieval-font",children:"Vulnerabilidade do Castelo"})]}),e.jsxs("span",{className:`text-sm font-black medieval-font ${o>70?"text-red-500 animate-pulse":"text-emerald-400"}`,children:[u," PODER"]})]}),e.jsxs("div",{className:"w-full h-4 bg-black rounded-full p-0.5 border border-[#b7950b]/20 relative",children:[e.jsx("div",{className:`h-full rounded-full transition-all duration-1000 ease-out bg-gradient-to-r ${n()} ${o>60?"flame-effect":""}`,style:{width:`${o}%`}}),e.jsx("div",{className:"absolute inset-0 flex justify-around pointer-events-none opacity-20",children:[...Array(6)].map((f,d)=>e.jsx("div",{className:"w-1 h-full border-x border-[#b7950b]"},d))})]})]})},te=()=>{const[t,r]=g.useState("LOBBY"),[u]=g.useState(z),[c,o]=g.useState(null),[n,f]=g.useState([]),[d,x]=g.useState([]),[b,w]=g.useState(null),[S,P]=g.useState(!1),I=s=>{o(s);const l=[...s.cards].sort(()=>Math.random()-.5);f(l),r("PLAYING"),x([]),w(null)},A=()=>{const l=[...u.flatMap(m=>m.cards)].sort(()=>Math.random()-.5).slice(0,5);o({id:"kings-treasure",name:"Ameaças Ocultas",icon:"fa-ghost",description:"Uma incursão estratégica pelas sombras do reino, onde o invisível se torna real e o silêncio é o aviso.",cards:l}),f(l),r("PLAYING"),x([]),w(null)},N=g.useCallback(s=>{x(l=>[...l,{...s,acceptedAt:new Date,status:"pending"}]),f(l=>l.filter(m=>m.id!==s.id))},[]),E=g.useCallback(s=>{f(l=>l.filter(m=>m.id!==s.id))},[]),k=g.useCallback(s=>{f(l=>[...l.filter(p=>p.id!==s.id),s])},[]);g.useEffect(()=>{t==="PLAYING"&&n.length===0&&c!==null&&(d.length===0?(r("LOBBY"),o(null),x([]),w(null)):r("SUMMARY"))},[n.length,t,c,d.length]),g.useEffect(()=>{t==="SUMMARY"&&d.length>0&&!b&&(async()=>{P(!0);const l=await B(d);w(l),P(!1)})()},[t,d.length,b]);const M=Object.values(i).map(s=>({name:s,value:d.filter(l=>l.category===s).length})).filter(s=>s.value>0),j=["#b7950b","#8d6e63","#d4c3a1","#9a7d0a","#5d4037","#795548"];return e.jsxs("div",{className:"min-h-screen flex flex-col relative z-20",children:[e.jsxs("header",{className:"px-12 py-6 flex justify-between items-center bg-black/40 backdrop-blur-md border-b border-white/5 sticky top-0 z-50",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-[#b7950b] to-[#7d6608] rounded-full flex items-center justify-center shadow-lg border border-white/10",children:e.jsx("i",{className:"fas fa-shield-halved text-black text-xl"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"font-bold text-xl tracking-wider text-[#f4e4bc] uppercase medieval-font gold-glow",children:"Threat Modeling Master"}),e.jsx("p",{className:"text-[8px] text-[#b7950b] font-black uppercase tracking-[0.4em]",children:"Guardião do Reino Seguro"})]})]}),e.jsx("div",{className:"flex items-center gap-8",children:e.jsxs("button",{className:"flex items-center gap-2 px-6 py-2 bg-black/60 border border-[#b7950b]/30 rounded-full transition-all hover:bg-[#b7950b]/10 group",children:[e.jsx("i",{className:"fas fa-book-skull text-[#b7950b] text-xs"}),e.jsx("span",{className:"text-[10px] font-bold text-white uppercase tracking-widest medieval-font",children:"Sabedoria Antiga & Pergaminhos"})]})})]}),e.jsxs("main",{className:"flex-grow flex flex-col items-center p-8 lg:p-12",children:[t==="LOBBY"&&e.jsxs("div",{className:"max-w-7xl w-full text-center space-y-12 py-12 animate-fadeIn",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx("h2",{className:"text-5xl md:text-7xl font-bold text-[#f4e4bc] medieval-font tracking-tight gold-glow uppercase",children:"O Grande Arquivo de Ameaças"}),e.jsx("p",{className:"text-[#b7950b] max-w-2xl mx-auto text-xl italic font-serif opacity-80",children:'"Nenhum reino cai sem antes ser corroído pelas sombras ocultas."'})]}),e.jsx("div",{className:"flex flex-col items-center py-16",children:e.jsxs("button",{onClick:A,className:"group relative flex flex-col items-center focus:outline-none",children:[e.jsx("div",{className:"absolute -inset-20 bg-[#b7950b]/10 blur-[100px] rounded-full opacity-60 group-hover:opacity-100 transition-opacity duration-1000 animate-pulse"}),e.jsxs("div",{className:"relative w-36 h-36 flex items-center justify-center transition-transform duration-700 group-hover:scale-110",children:[e.jsx("div",{className:"absolute inset-0 w-36 h-36 rounded-full bg-gradient-to-r from-[#b7950b]/30 via-[#b7950b]/50 to-[#b7950b]/30 blur-xl animate-pulse"}),e.jsx("div",{className:"absolute inset-0 w-36 h-36 rounded-full shadow-[0_0_40px_rgba(183,149,11,0.8),0_0_80px_rgba(183,149,11,0.4),0_0_120px_rgba(183,149,11,0.2)]"}),e.jsx("div",{className:"relative w-36 h-36 rounded-full overflow-hidden z-10",children:e.jsx("img",{src:"/threat-modeling-card-game/images/HEAD.png",alt:"Ameaças Ocultas",className:"w-full h-full object-cover rounded-full group-hover:brightness-110 transition-all duration-500"})}),e.jsx("div",{className:"absolute inset-0 z-0",children:e.jsx("div",{className:"absolute top-0 left-1/2 -translate-x-1/2 w-[2px] h-12 bg-gradient-to-t from-[#b7950b] to-transparent opacity-0 group-hover:opacity-100 transition-opacity"})})]}),e.jsxs("div",{className:"mt-12 space-y-3 relative",children:[e.jsx("div",{className:"absolute -top-6 left-1/2 -translate-x-1/2 w-20 h-[1px] bg-gradient-to-r from-transparent via-[#b7950b] to-transparent opacity-40 group-hover:w-40 transition-all duration-700"}),e.jsx("h3",{className:"text-4xl font-bold text-[#f4e4bc] medieval-font gold-glow uppercase tracking-[0.3em] group-hover:text-white transition-colors",children:"Ameaças Ocultas"}),e.jsx("p",{className:"text-[12px] font-bold text-[#b7950b] uppercase tracking-[0.5em] opacity-80",children:"Desafie os perigos invisíveis do reino"})]})]})}),e.jsx("div",{className:"divider-gold w-3/4 mx-auto opacity-20 my-12"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-12 mt-12 px-4",children:u.map(s=>e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsxs("button",{onClick:()=>I(s),className:"card-pedestal w-full aspect-[3/4] rounded-[0.5rem] p-1 border-stone-800 shadow-[0_30px_60px_-15px_rgba(0,0,0,0.8)] flex flex-col items-center group relative overflow-hidden ring-1 ring-[#b7950b]/10",children:[e.jsxs("div",{className:"absolute inset-0 z-0 opacity-40 group-hover:opacity-60 transition-opacity duration-700",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-[#1a0f0a] via-transparent to-black/80"}),e.jsx("img",{src:"https://images.unsplash.com/photo-1518709268805-4e9042af9f23?q=80&w=400&h=600&fit=crop",className:"w-full h-full object-cover",alt:""})]}),e.jsxs("div",{className:"relative z-10 flex flex-col h-full w-full p-8 items-center justify-between",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("h3",{className:"text-3xl font-bold text-[#f4e4bc] medieval-font tracking-widest mb-2 uppercase group-hover:text-white transition-colors",children:s.name}),e.jsx("div",{className:"divider-gold opacity-30 w-1/2 mx-auto"})]}),e.jsx("div",{className:"w-24 h-24 bg-black/60 border border-[#b7950b]/30 rounded-full flex items-center justify-center shadow-2xl group-hover:scale-110 transition-transform duration-500",children:e.jsx("i",{className:`fas ${s.icon} text-[#b7950b] text-4xl`})}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("p",{className:"text-[11px] text-[#f4e4bc]/60 font-serif leading-relaxed italic px-4",children:['"',s.description,'"']}),e.jsx("div",{className:"divider-gold opacity-20"}),e.jsxs("div",{className:"flex items-center justify-center gap-4 text-[#b7950b]",children:[e.jsx("i",{className:"fas fa-file-contract text-xs"}),e.jsxs("span",{className:"text-[10px] font-bold uppercase tracking-[0.2em] medieval-font",children:[s.cards.length," Pergaminhos"]}),e.jsx("i",{className:"fas fa-dragon opacity-30"})]})]})]})]}),e.jsx("div",{className:"w-[90%] h-4 bg-stone-900 border-x-4 border-stone-800 shadow-xl rounded-b-lg"})]},s.id))})]}),t==="PLAYING"&&e.jsxs("div",{className:"flex flex-col items-center w-full max-w-6xl gap-16 animate-fadeIn",children:[e.jsxs("div",{className:"w-full flex flex-col lg:flex-row justify-between items-center gap-8 bg-black/40 p-8 rounded-3xl border border-white/5 backdrop-blur-xl",children:[e.jsxs("div",{className:"space-y-2 text-center lg:text-left",children:[e.jsxs("div",{className:"flex items-center justify-center lg:justify-start gap-3",children:[e.jsx("i",{className:"fas fa-fire text-orange-600 animate-pulse text-xs"}),e.jsx("span",{className:"text-[10px] font-bold text-[#b7950b] uppercase tracking-[0.3em] medieval-font",children:"Capítulo Atual"})]}),e.jsx("h2",{className:"text-3xl font-bold text-[#f4e4bc] medieval-font tracking-wider uppercase",children:c==null?void 0:c.name})]}),e.jsx(ae,{backlog:d}),e.jsxs("div",{className:"flex gap-4",children:[e.jsxs("div",{className:"px-6 py-3 bg-black/60 border border-[#b7950b]/30 rounded-2xl text-center",children:[e.jsx("div",{className:"text-[8px] text-[#b7950b] font-bold uppercase tracking-widest mb-1",children:"Restantes"}),e.jsx("div",{className:"text-2xl font-bold text-white medieval-font",children:n.length})]}),e.jsx("button",{onClick:()=>r("LOBBY"),className:"px-6 py-3 bg-white/5 hover:bg-white/10 border border-white/10 rounded-2xl text-[10px] font-bold text-[#8d6e63] uppercase tracking-widest medieval-font self-center",children:"Abandonar"})]})]}),e.jsx("div",{className:"relative h-[600px] w-full flex justify-center items-center perspective-1000",children:n.length>0?e.jsx("div",{className:"animate-cardEnter",children:e.jsx(ee,{card:n[0],isFirst:!0,onAccept:()=>N(n[0]),onPass:()=>E(n[0]),onSkip:()=>k(n[0]),onExit:()=>r("LOBBY")})},n[0].id):e.jsxs("div",{className:"text-center space-y-8 animate-fadeIn",children:[e.jsx("div",{className:"w-24 h-24 bg-gradient-to-br from-[#b7950b] to-[#7d6608] rounded-full flex items-center justify-center mx-auto shadow-gold",children:e.jsx("i",{className:"fas fa-ghost text-black text-4xl"})}),e.jsx("h3",{className:"text-4xl font-bold text-[#f4e4bc] medieval-font uppercase tracking-tighter",children:"Incursão Finalizada"}),e.jsx("p",{className:"text-[#b7950b] text-sm",children:d.length===0?"Nenhuma ameaça foi aceita. Retornando ao lobby...":"Redirecionando para o relatório..."})]})})]}),t==="SUMMARY"&&e.jsxs("div",{className:"w-full max-w-7xl space-y-12 py-12 animate-fadeIn",children:[e.jsxs("div",{className:"text-center space-y-4",children:[e.jsx("h2",{className:"text-5xl font-bold text-[#f4e4bc] medieval-font gold-glow uppercase",children:"Relatório de Fortificação"}),e.jsxs("p",{className:"text-[#8d6e63] uppercase tracking-[0.2em] text-[10px] font-bold",children:["Capítulo: ",c==null?void 0:c.name]}),e.jsx("button",{onClick:()=>r("LOBBY"),className:"mt-6 px-8 py-4 bg-[#b7950b] hover:bg-[#9a7d0a] text-black font-bold uppercase tracking-widest rounded-xl transition-all shadow-lg medieval-font",children:"Voltar ao Lobby"})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-10",children:[e.jsxs("div",{className:"lg:col-span-2 space-y-10",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[e.jsxs("div",{className:"stone-panel p-10 rounded-3xl",children:[e.jsx("h3",{className:"text-[10px] font-bold text-[#b7950b] mb-8 uppercase tracking-[0.3em] medieval-font",children:"Distribuição de Maldições"}),e.jsx("div",{className:"h-64",children:e.jsx(L,{width:"100%",height:"100%",children:e.jsxs(G,{children:[e.jsx(F,{data:M,cx:"50%",cy:"50%",innerRadius:60,outerRadius:85,paddingAngle:8,dataKey:"value",children:M.map((s,l)=>e.jsx(q,{fill:j[l%j.length]},`cell-${l}`))}),e.jsx(W,{contentStyle:{backgroundColor:"#0d0d0d",border:"1px solid #b7950b",borderRadius:"12px",color:"#f4e4bc",fontSize:"12px"}})]})})})]}),e.jsxs("div",{className:"stone-panel p-10 rounded-3xl flex flex-col justify-center items-center text-center",children:[e.jsx("div",{className:"w-20 h-20 bg-[#b7950b]/10 rounded-full flex items-center justify-center mb-8 border border-[#b7950b]/20",children:e.jsx("i",{className:"fas fa-file-invoice text-[#b7950b] text-3xl"})}),e.jsx("div",{className:"text-7xl font-bold text-white mb-2 medieval-font tracking-tighter",children:d.length}),e.jsx("div",{className:"text-[10px] font-bold text-[#b7950b] uppercase tracking-[0.4em]",children:"Riscos Aceitos"}),e.jsx("div",{className:"divider-gold w-full my-8"}),e.jsx("p",{className:"text-[11px] text-[#8d6e63] leading-relaxed italic font-serif",children:'"Para cada brecha revelada, um novo tijolo deve ser posto na muralha."'})]})]}),e.jsxs("div",{className:"stone-panel rounded-3xl overflow-hidden",children:[e.jsx("div",{className:"p-8 border-b border-white/5 bg-white/5",children:e.jsx("h3",{className:"text-[10px] font-bold text-[#b7950b] uppercase tracking-[0.3em] medieval-font",children:"Livro de Backlog"})}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-left",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-black/40 text-[#b7950b] text-[9px] font-bold uppercase tracking-[0.2em]",children:[e.jsx("th",{className:"py-5 px-8",children:"Ameaça"}),e.jsx("th",{className:"py-5 px-8",children:"Referência"}),e.jsx("th",{className:"py-5 px-8 text-right",children:"Gravidade"})]})}),e.jsx("tbody",{children:d.map((s,l)=>e.jsxs("tr",{className:"border-b border-white/5 hover:bg-white/5 transition-colors group",children:[e.jsxs("td",{className:"py-6 px-8",children:[e.jsx("div",{className:"font-bold text-[#f4e4bc] medieval-font text-lg",children:s.title}),e.jsx("div",{className:"text-[9px] text-[#8d6e63] mt-1 uppercase tracking-wider",children:s.category})]}),e.jsx("td",{className:"py-6 px-8",children:e.jsxs("a",{href:s.referenceUrl,target:"_blank",rel:"noreferrer",className:"text-[10px] text-blue-400 hover:text-blue-300 flex items-center gap-2",children:[e.jsx("i",{className:"fas fa-link text-[8px]"})," ",s.reference]})}),e.jsx("td",{className:"py-6 px-8 text-right",children:e.jsx("span",{className:`px-4 py-1.5 rounded-full text-[8px] font-bold uppercase tracking-widest ${s.impact===a.HIGH?"bg-red-900/40 text-red-400 border border-red-500/20":s.impact===a.MEDIUM?"bg-amber-900/40 text-amber-400 border border-amber-500/20":"bg-emerald-900/40 text-emerald-400 border border-emerald-500/20"}`,children:s.impact})})]},l))})]})})]})]}),e.jsx("div",{className:"lg:col-span-1",children:e.jsxs("div",{className:"parchment p-10 rounded-[2rem] sticky top-28 space-y-8",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("i",{className:"fas fa-feather-pointed text-[#2c1810] text-3xl mb-4 opacity-40"}),e.jsx("h3",{className:"font-bold text-xl text-[#2c1810] medieval-font uppercase tracking-widest",children:"Sábio Arquiteto"})]}),e.jsx("div",{className:"divider-gold opacity-100 bg-[#2c1810]/20"}),e.jsx("div",{className:"text-[13px] text-[#3e2723] font-serif leading-relaxed italic min-h-[200px] markdown-content",dangerouslySetInnerHTML:{__html:b?T.parse(b):""},children:S&&e.jsxs("div",{className:"space-y-3 animate-pulse",children:[e.jsx("div",{className:"h-3 bg-[#1a0f0a]/10 rounded w-full"}),e.jsx("div",{className:"h-3 bg-[#1a0f0a]/10 rounded w-full"}),e.jsx("div",{className:"h-3 bg-[#1a0f0a]/10 rounded w-3/4"})]})}),e.jsx("button",{onClick:()=>r("LOBBY"),className:"w-full py-5 bg-[#2c1810] hover:bg-black text-[#d4c3a1] rounded-2xl font-bold text-[10px] tracking-[0.3em] uppercase transition-all shadow-xl",children:"Nova Expedição"})]})})]})]})]})]})},C=document.getElementById("root");if(!C)throw new Error("Could not find root element to mount to");const ie=R.createRoot(C);ie.render(e.jsx(D.StrictMode,{children:e.jsx(te,{})}));
